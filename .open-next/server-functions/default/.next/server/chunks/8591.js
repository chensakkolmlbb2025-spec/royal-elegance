"use strict";exports.id=8591,exports.ids=[8591],exports.modules={10643:(a,b,c)=>{c.d(b,{U:()=>e});var d=c(58986);function e(){return(0,d.createBrowserClient)("https://jxtgigcmplvjmtsxpfrp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4dGdpZ2NtcGx2am10c3hwZnJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMjE5OTksImV4cCI6MjA3NzY5Nzk5OX0.knIYsJJNWRo3UYvUlXgNmvWYZDQ1sacCWPBSMyFY_BM")}},19217:(a,b,c)=>{c.d(b,{$:()=>i,r:()=>h});var d=c(21124);c(38301);var e=c(15397),f=c(26691),g=c(15514);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function i({className:a,variant:b,size:c,asChild:f=!1,...i}){let j=f?e.DX:"button";return(0,d.jsx)(j,{"data-slot":"button",className:(0,g.cn)(h({variant:b,size:c,className:a})),...i})}},70671:(a,b,c)=>{c.d(b,{Bc:()=>z,ES:()=>h,F2:()=>n,HN:()=>r,NT:()=>m,Qn:()=>g,RK:()=>k,TG:()=>p,VH:()=>l,Z1:()=>s,Zn:()=>y,_B:()=>i,ar:()=>w,bU:()=>u,dJ:()=>A,dv:()=>x,em:()=>j,h1:()=>t,hs:()=>v,rD:()=>B,t8:()=>o,vq:()=>C,xX:()=>q});var d=c(35388);c(10643);let e=a=>{let b={...a};return b.created_at&&(b.createdAt=new Date(b.created_at),delete b.created_at),b.updated_at&&(b.updatedAt=new Date(b.updated_at),delete b.updated_at),b.check_in_date&&(b.checkInDate=new Date(b.check_in_date),b.checkIn=new Date(b.check_in_date),delete b.check_in_date),b.check_out_date&&(b.checkOutDate=new Date(b.check_out_date),b.checkOut=new Date(b.check_out_date),delete b.check_out_date),b.check_in&&(b.checkInDate=new Date(b.check_in),b.checkIn=new Date(b.check_in),delete b.check_in),b.check_out&&(b.checkOutDate=new Date(b.check_out),b.checkOut=new Date(b.check_out),delete b.check_out),b.floor_id&&(b.floorId=b.floor_id,delete b.floor_id),b.room_type_id&&(b.roomTypeId=b.room_type_id,delete b.room_type_id),b.room_id&&(b.roomId=b.room_id,delete b.room_id),b.user_id&&(b.userId=b.user_id,delete b.user_id),b.guest_name&&(b.guestName=b.guest_name,delete b.guest_name),b.guest_email&&(b.guestEmail=b.guest_email,delete b.guest_email),b.guest_phone&&(b.guestPhone=b.guest_phone,delete b.guest_phone),b.guest_count&&(b.guestCount=b.guest_count,b.guests=b.guest_count,delete b.guest_count),b.room_price&&(b.roomPrice=b.room_price,delete b.room_price),b.services_price&&(b.servicesPrice=b.services_price,delete b.services_price),b.room_number&&(b.roomNumber=b.room_number,delete b.room_number),void 0!==b.floor_number&&(b.number=b.floor_number,delete b.floor_number),void 0!==b.total_rooms&&(b.totalRooms=b.total_rooms,delete b.total_rooms),b.base_price&&(b.basePrice=b.base_price,delete b.base_price),b.max_occupancy&&(b.maxOccupancy=b.max_occupancy,delete b.max_occupancy),b.total_price&&(b.totalPrice=b.total_price,delete b.total_price),b.payment_status&&(b.paymentStatus=b.payment_status,delete b.payment_status),b.booking_type&&(b.bookingType=b.booking_type,delete b.booking_type),b.booking_reference&&(b.bookingReference=b.booking_reference,delete b.booking_reference),b.payment_method&&(b.paymentMethod=b.payment_method,delete b.payment_method),void 0!==b.paid_amount&&(b.paidAmount=b.paid_amount,delete b.paid_amount),void 0!==b.is_available&&(b.available=b.is_available,delete b.is_available),void 0!==b.is_active&&(b.active=b.is_active,delete b.is_active),b.thumbnail_url&&(b.thumbnailUrl=b.thumbnail_url,delete b.thumbnail_url),void 0!==b.is_default&&(b.isDefault=b.is_default,delete b.is_default),void 0!==b.sort_order&&(b.sortOrder=b.sort_order,delete b.sort_order),b.category_id&&(b.categoryId=b.category_id,delete b.category_id),void 0!==b.room_id&&(b.room_id?b.bookingType="room":b.bookingType="service"),b.services||(b.services=[]),b},f=a=>{let b={};return Object.keys(a).forEach(c=>{"createdAt"===c?b.created_at=a[c]:"checkIn"===c||"checkInDate"===c?b.check_in_date=a[c]:"checkOut"===c||"checkOutDate"===c?b.check_out_date=a[c]:"floorId"===c?b.floor_id=a[c]:"roomTypeId"===c?b.room_type_id=a[c]:"roomId"===c?b.room_id=a[c]:"userId"===c?b.user_id=a[c]:"guestName"===c?b.guest_name=a[c]:"guestEmail"===c?b.guest_email=a[c]:"guestPhone"===c?b.guest_phone=a[c]:"guestCount"===c?b.guest_count=a[c]:"roomPrice"===c?b.room_price=a[c]:"servicesPrice"===c?b.services_price=a[c]:"roomNumber"===c?b.room_number=a[c]:"number"===c?b.floor_number=a[c]:"totalRooms"===c?b.total_rooms=a[c]:"basePrice"===c?b.base_price=a[c]:"maxOccupancy"===c?b.max_occupancy=a[c]:"totalPrice"===c?b.total_price=a[c]:"paymentStatus"===c?b.payment_status=a[c]:"bookingType"===c?b.booking_type=a[c]:"bookingReference"===c?b.booking_reference=a[c]:"paymentMethod"===c?b.payment_method=a[c]:"paidAmount"===c?b.paid_amount=a[c]:"available"===c?b.is_available=a[c]:"active"===c?b.is_active=a[c]:"thumbnailUrl"===c?b.thumbnail_url=a[c]:"isDefault"===c?b.is_default=a[c]:"sortOrder"===c?b.sort_order=a[c]:"categoryId"===c?b.category_id=a[c]:b[c]=a[c]}),b},g=async()=>{let a=d.N;if(!a)throw Error("Supabase client not initialized");let{data:b,error:c}=await a.from("floors").select("*").order("floor_number");if(c)throw c;return b.map(e)},h=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let c=f(a),{data:g,error:h}=await b.from("floors").insert([c]).select().single();if(h)throw h;return e(g)},i=async(a,b)=>{let c=d.N;if(!c)throw Error("Supabase client not initialized");let e=f(b),{error:g}=await c.from("floors").update(e).eq("id",a);if(g)throw g},j=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let{error:c}=await b.from("floors").delete().eq("id",a);if(c)throw c},k=async()=>{let a=d.N;if(!a)throw Error("Supabase client not initialized");let{data:b,error:c}=await a.from("room_types").select("*");if(c)throw c;return b.map(e)},l=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let c=f(a);console.log("[addRoomType] Sending to database:",JSON.stringify(c,null,2));let{data:e,error:g}=await b.from("room_types").insert([c]).select().single();if(g)throw console.error("[addRoomType] Database error:",JSON.stringify(g,null,2)),Error(g.message||g.hint||"Failed to add room type");return console.log("[addRoomType] Success, returned ID:",e.id),e.id},m=async(a,b)=>{let c=d.N;if(!c)throw Error("Supabase client not initialized");let e=f(b),{error:g}=await c.from("room_types").update(e).eq("id",a);if(g)throw g},n=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let{error:c}=await b.from("room_types").delete().eq("id",a);if(c)throw c},o=async()=>{let a=d.N;if(!a)throw Error("Supabase client not initialized");let{data:b,error:c}=await a.from("rooms").select(`
      *,
      floor:floors (
        id,
        floor_number,
        name
      )
    `);if(c)throw c;return b.map(e)},p=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let c=f(a),{data:e,error:g}=await b.from("rooms").insert([c]).select().single();if(g)throw g;return e.id},q=async(a,b)=>{let c=d.N;if(!c)throw Error("Supabase client not initialized");let e=f(b),{error:g}=await c.from("rooms").update(e).eq("id",a);if(g)throw g},r=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let{error:c}=await b.from("rooms").delete().eq("id",a);if(c)throw c},s=async()=>{let a=d.N;if(!a)throw Error("Supabase client not initialized");let{data:b,error:c}=await a.from("services").select("*");if(c)throw c;return b.map(e)},t=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let c=f(a),{data:e,error:g}=await b.from("services").insert([c]).select().single();if(g)throw g;return e.id},u=async(a,b)=>{let c=d.N;if(!c)throw Error("Supabase client not initialized");let e=f(b),{error:g}=await c.from("services").update(e).eq("id",a);if(g)throw g},v=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let{error:c}=await b.from("services").delete().eq("id",a);if(c)throw c},w=async()=>{let a=d.N;if(!a)throw Error("Supabase client not initialized");let{data:b,error:c}=await a.from("service_categories").select("*").order("sort_order");if(c)throw c;return b.map(e)},x=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let c=f(a),{data:e,error:g}=await b.from("service_categories").insert([c]).select().single();if(g)throw g;return e.id},y=async(a,b)=>{let c=d.N;if(!c)throw Error("Supabase client not initialized");let e=f(b),{error:g}=await c.from("service_categories").update(e).eq("id",a);if(g)throw g},z=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let{error:c}=await b.from("service_categories").delete().eq("id",a);if(c)throw c},A=async()=>{let a=d.N;if(!a)throw Error("Supabase client not initialized");let{data:b,error:c}=await a.from("bookings").select("*").order("created_at",{ascending:!1});if(c)throw c;return b.map(e)},B=async a=>{let b=d.N;if(!b)throw Error("Supabase client not initialized");let{data:c,error:f}=await b.from("bookings").select("*").eq("user_id",a).order("created_at",{ascending:!1});if(f)throw f;return c.map(e)},C=async(a,b)=>{let c=d.N;if(!c)throw Error("Supabase client not initialized");if(!a||""===a.trim())throw Error("Booking ID is required");console.log("Updating booking:",{id:a,booking:b});let{data:g,error:h}=await c.from("bookings").select("id, status, user_id").eq("id",a);if(console.log("Booking existence check:",{existingBooking:g,checkError:h}),h)throw console.error("Error checking booking existence:",h),Error(`Database error: ${h.message}`);if(!g||0===g.length)throw Error(`Booking with ID ${a} does not exist in database`);console.log("Found existing booking:",g[0]);let i=b;console.log("Update data:",i=1===Object.keys(b).length&&"status"in b?b:f(b));let{data:j,error:k}=await c.from("bookings").update(i).eq("id",a).select();if(console.log("Update result:",{data:j,error:k,dataLength:j?.length}),k)throw console.error("Supabase error:",k),Error(`Database error: ${k.message}`);if(!j||0===j.length)throw Error("Cannot update booking: This booking may not belong to your account, may not be in a status that allows updates, or may not exist. Please check booking status and try again.");return e(j[0])}}};