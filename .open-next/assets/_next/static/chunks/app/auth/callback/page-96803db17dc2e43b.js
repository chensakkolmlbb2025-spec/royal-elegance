(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6769],{8525:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(16010);function a(){return(0,s.createBrowserClient)("https://jxtgigcmplvjmtsxpfrp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4dGdpZ2NtcGx2am10c3hwZnJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMjE5OTksImV4cCI6MjA3NzY5Nzk5OX0.knIYsJJNWRo3UYvUlXgNmvWYZDQ1sacCWPBSMyFY_BM")}},25016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>c});var s=r(2821),a=r(75889);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42529:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},60361:(e,t,r)=>{Promise.resolve().then(r.bind(r,94369))},78874:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},83209:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>o,ZB:()=>n,Zp:()=>c,aR:()=>i,wL:()=>d});var s=r(95155);r(12115);var a=r(25016);function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},94369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(95155),a=r(12115),c=r(20063),i=r(8525),n=r(83209),l=r(35299),o=r(42529),d=r(78874);function u(){let e=(0,c.useRouter)(),t=(0,c.useSearchParams)(),[r,u]=(0,a.useState)("processing"),[m,p]=(0,a.useState)("Completing authentication...");return(0,a.useEffect)(()=>{let r=setTimeout(async()=>{try{let r=(0,i.U)(),s=t.get("error"),a=t.get("error_description");if(s){u("error"),p(a||"Authentication failed: "+s),setTimeout(()=>e.replace("/login"),3e3);return}let c=t.get("type");if("recovery"===c){u("success"),p("Password reset link verified"),setTimeout(()=>e.replace("/auth/reset-password"),2e3);return}p("Verifying authentication...");let{data:{session:n},error:l}=await r.auth.getSession();if(l||!n){u("error"),p("Failed to create session"),setTimeout(()=>e.replace("/login"),3e3);return}p("Loading your profile...");let{data:o}=await r.from("profiles").select("role").eq("id",n.user.id).single(),d=(null==o?void 0:o.role)||"user";u("success"),p("Authentication successful!"),setTimeout(()=>{switch(d){case"admin":e.replace("/admin");break;case"staff":e.replace("/staff");break;default:e.replace("/home")}},1500)}catch(t){console.error("Auth callback error:",t),u("error"),p("An unexpected error occurred"),setTimeout(()=>e.replace("/login"),3e3)}},100);return()=>clearTimeout(r)},[e,t]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-accent/5 to-background p-4",children:(0,s.jsxs)(n.Zp,{className:"glass-card w-full max-w-md",children:[(0,s.jsxs)(n.aR,{className:"text-center pb-4",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 p-3 rounded-full bg-white/80 backdrop-blur-sm shadow-sm",children:(()=>{switch(r){case"processing":return(0,s.jsx)(l.A,{className:"w-8 h-8 text-blue-500 animate-spin"});case"success":return(0,s.jsx)(o.A,{className:"w-8 h-8 text-green-500"});case"error":return(0,s.jsx)(d.A,{className:"w-8 h-8 text-red-500"})}})()}),(0,s.jsx)(n.ZB,{className:"text-2xl font-display",children:(()=>{switch(r){case"processing":return"Processing Authentication";case"success":return"Authentication Successful";case"error":return"Authentication Failed"}})()}),(0,s.jsx)(n.BT,{className:"mt-2",children:m})]}),(0,s.jsx)(n.Wu,{className:"pt-0",children:"error"===r&&(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("button",{onClick:()=>e.replace("/login"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Return to Login"})})})]})})}function m(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-accent/5 to-background p-4",children:(0,s.jsx)(n.Zp,{className:"glass-card w-full max-w-md",children:(0,s.jsxs)(n.aR,{className:"text-center pb-4",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 p-3 rounded-full bg-white/80 backdrop-blur-sm shadow-sm",children:(0,s.jsx)(l.A,{className:"w-8 h-8 text-blue-500 animate-spin"})}),(0,s.jsx)(n.ZB,{className:"text-2xl font-display",children:"Processing Authentication"}),(0,s.jsx)(n.BT,{className:"mt-2",children:"Please wait..."})]})})}),children:(0,s.jsx)(u,{})})}}},e=>{e.O(0,[4174,6010,8441,1255,7358],()=>e(e.s=60361)),_N_E=e.O()}]);