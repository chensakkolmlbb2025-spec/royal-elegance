"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2649],{4939:(e,t,r)=>{r.d(t,{Bc:()=>E,ES:()=>c,F2:()=>p,HN:()=>b,NT:()=>m,Qn:()=>s,RK:()=>u,TG:()=>f,VH:()=>_,Z1:()=>y,Zn:()=>S,_B:()=>l,ar:()=>I,bU:()=>v,dJ:()=>U,dv:()=>N,em:()=>d,h1:()=>w,hs:()=>k,rD:()=>z,t8:()=>h,vq:()=>x,xX:()=>g});var o=r(57878),i=r(8525);let a=e=>{let t={...e};return t.created_at&&(t.createdAt=new Date(t.created_at),delete t.created_at),t.updated_at&&(t.updatedAt=new Date(t.updated_at),delete t.updated_at),t.check_in_date&&(t.checkInDate=new Date(t.check_in_date),t.checkIn=new Date(t.check_in_date),delete t.check_in_date),t.check_out_date&&(t.checkOutDate=new Date(t.check_out_date),t.checkOut=new Date(t.check_out_date),delete t.check_out_date),t.check_in&&(t.checkInDate=new Date(t.check_in),t.checkIn=new Date(t.check_in),delete t.check_in),t.check_out&&(t.checkOutDate=new Date(t.check_out),t.checkOut=new Date(t.check_out),delete t.check_out),t.floor_id&&(t.floorId=t.floor_id,delete t.floor_id),t.room_type_id&&(t.roomTypeId=t.room_type_id,delete t.room_type_id),t.room_id&&(t.roomId=t.room_id,delete t.room_id),t.user_id&&(t.userId=t.user_id,delete t.user_id),t.guest_name&&(t.guestName=t.guest_name,delete t.guest_name),t.guest_email&&(t.guestEmail=t.guest_email,delete t.guest_email),t.guest_phone&&(t.guestPhone=t.guest_phone,delete t.guest_phone),t.guest_count&&(t.guestCount=t.guest_count,t.guests=t.guest_count,delete t.guest_count),t.room_price&&(t.roomPrice=t.room_price,delete t.room_price),t.services_price&&(t.servicesPrice=t.services_price,delete t.services_price),t.room_number&&(t.roomNumber=t.room_number,delete t.room_number),void 0!==t.floor_number&&(t.number=t.floor_number,delete t.floor_number),void 0!==t.total_rooms&&(t.totalRooms=t.total_rooms,delete t.total_rooms),t.base_price&&(t.basePrice=t.base_price,delete t.base_price),t.max_occupancy&&(t.maxOccupancy=t.max_occupancy,delete t.max_occupancy),t.total_price&&(t.totalPrice=t.total_price,delete t.total_price),t.payment_status&&(t.paymentStatus=t.payment_status,delete t.payment_status),t.booking_type&&(t.bookingType=t.booking_type,delete t.booking_type),t.booking_reference&&(t.bookingReference=t.booking_reference,delete t.booking_reference),t.payment_method&&(t.paymentMethod=t.payment_method,delete t.payment_method),void 0!==t.paid_amount&&(t.paidAmount=t.paid_amount,delete t.paid_amount),void 0!==t.is_available&&(t.available=t.is_available,delete t.is_available),void 0!==t.is_active&&(t.active=t.is_active,delete t.is_active),t.thumbnail_url&&(t.thumbnailUrl=t.thumbnail_url,delete t.thumbnail_url),void 0!==t.is_default&&(t.isDefault=t.is_default,delete t.is_default),void 0!==t.sort_order&&(t.sortOrder=t.sort_order,delete t.sort_order),t.category_id&&(t.categoryId=t.category_id,delete t.category_id),void 0!==t.room_id&&(t.room_id?t.bookingType="room":t.bookingType="service"),t.services||(t.services=[]),t},n=e=>{let t={};return Object.keys(e).forEach(r=>{"createdAt"===r?t.created_at=e[r]:"checkIn"===r||"checkInDate"===r?t.check_in_date=e[r]:"checkOut"===r||"checkOutDate"===r?t.check_out_date=e[r]:"floorId"===r?t.floor_id=e[r]:"roomTypeId"===r?t.room_type_id=e[r]:"roomId"===r?t.room_id=e[r]:"userId"===r?t.user_id=e[r]:"guestName"===r?t.guest_name=e[r]:"guestEmail"===r?t.guest_email=e[r]:"guestPhone"===r?t.guest_phone=e[r]:"guestCount"===r?t.guest_count=e[r]:"roomPrice"===r?t.room_price=e[r]:"servicesPrice"===r?t.services_price=e[r]:"roomNumber"===r?t.room_number=e[r]:"number"===r?t.floor_number=e[r]:"totalRooms"===r?t.total_rooms=e[r]:"basePrice"===r?t.base_price=e[r]:"maxOccupancy"===r?t.max_occupancy=e[r]:"totalPrice"===r?t.total_price=e[r]:"paymentStatus"===r?t.payment_status=e[r]:"bookingType"===r?t.booking_type=e[r]:"bookingReference"===r?t.booking_reference=e[r]:"paymentMethod"===r?t.payment_method=e[r]:"paidAmount"===r?t.paid_amount=e[r]:"available"===r?t.is_available=e[r]:"active"===r?t.is_active=e[r]:"thumbnailUrl"===r?t.thumbnail_url=e[r]:"isDefault"===r?t.is_default=e[r]:"sortOrder"===r?t.sort_order=e[r]:"categoryId"===r?t.category_id=e[r]:t[r]=e[r]}),t},s=async()=>{let e=(0,i.U)()||o.N;if(!e)throw Error("Supabase client not initialized");let{data:t,error:r}=await e.from("floors").select("*").order("floor_number");if(r)throw r;return t.map(a)},c=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let r=n(e),{data:s,error:c}=await t.from("floors").insert([r]).select().single();if(c)throw c;return a(s)},l=async(e,t)=>{let r=(0,i.U)()||o.N;if(!r)throw Error("Supabase client not initialized");let a=n(t),{error:s}=await r.from("floors").update(a).eq("id",e);if(s)throw s},d=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.from("floors").delete().eq("id",e);if(r)throw r},u=async()=>{let e=(0,i.U)()||o.N;if(!e)throw Error("Supabase client not initialized");let{data:t,error:r}=await e.from("room_types").select("*");if(r)throw r;return t.map(a)},_=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let r=n(e);console.log("[addRoomType] Sending to database:",JSON.stringify(r,null,2));let{data:a,error:s}=await t.from("room_types").insert([r]).select().single();if(s)throw console.error("[addRoomType] Database error:",JSON.stringify(s,null,2)),Error(s.message||s.hint||"Failed to add room type");return console.log("[addRoomType] Success, returned ID:",a.id),a.id},m=async(e,t)=>{let r=(0,i.U)()||o.N;if(!r)throw Error("Supabase client not initialized");let a=n(t),{error:s}=await r.from("room_types").update(a).eq("id",e);if(s)throw s},p=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.from("room_types").delete().eq("id",e);if(r)throw r},h=async()=>{let e=(0,i.U)()||o.N;if(!e)throw Error("Supabase client not initialized");let{data:t,error:r}=await e.from("rooms").select("\n      *,\n      floor:floors (\n        id,\n        floor_number,\n        name\n      )\n    ");if(r)throw r;return t.map(a)},f=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let r=n(e),{data:a,error:s}=await t.from("rooms").insert([r]).select().single();if(s)throw s;return a.id},g=async(e,t)=>{let r=(0,i.U)()||o.N;if(!r)throw Error("Supabase client not initialized");let a=n(t),{error:s}=await r.from("rooms").update(a).eq("id",e);if(s)throw s},b=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.from("rooms").delete().eq("id",e);if(r)throw r},y=async()=>{let e=(0,i.U)()||o.N;if(!e)throw Error("Supabase client not initialized");let{data:t,error:r}=await e.from("services").select("*");if(r)throw r;return t.map(a)},w=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let r=n(e),{data:a,error:s}=await t.from("services").insert([r]).select().single();if(s)throw s;return a.id},v=async(e,t)=>{let r=(0,i.U)()||o.N;if(!r)throw Error("Supabase client not initialized");let a=n(t),{error:s}=await r.from("services").update(a).eq("id",e);if(s)throw s},k=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.from("services").delete().eq("id",e);if(r)throw r},I=async()=>{let e=(0,i.U)()||o.N;if(!e)throw Error("Supabase client not initialized");let{data:t,error:r}=await e.from("service_categories").select("*").order("sort_order");if(r)throw r;return t.map(a)},N=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let r=n(e),{data:a,error:s}=await t.from("service_categories").insert([r]).select().single();if(s)throw s;return a.id},S=async(e,t)=>{let r=(0,i.U)()||o.N;if(!r)throw Error("Supabase client not initialized");let a=n(t),{error:s}=await r.from("service_categories").update(a).eq("id",e);if(s)throw s},E=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.from("service_categories").delete().eq("id",e);if(r)throw r},U=async()=>{let e=(0,i.U)()||o.N;if(!e)throw Error("Supabase client not initialized");let{data:t,error:r}=await e.from("bookings").select("*").order("created_at",{ascending:!1});if(r)throw r;return t.map(a)},z=async e=>{let t=(0,i.U)()||o.N;if(!t)throw Error("Supabase client not initialized");let{data:r,error:n}=await t.from("bookings").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return r.map(a)},x=async(e,t)=>{let r=(0,i.U)()||o.N;if(!r)throw Error("Supabase client not initialized");if(!e||""===e.trim())throw Error("Booking ID is required");console.log("Updating booking:",{id:e,booking:t});let{data:s,error:c}=await r.from("bookings").select("id, status, user_id").eq("id",e);if(console.log("Booking existence check:",{existingBooking:s,checkError:c}),c)throw console.error("Error checking booking existence:",c),Error("Database error: ".concat(c.message));if(!s||0===s.length)throw Error("Booking with ID ".concat(e," does not exist in database"));console.log("Found existing booking:",s[0]);let l=t;console.log("Update data:",l=1===Object.keys(t).length&&"status"in t?t:n(t));let{data:d,error:u}=await r.from("bookings").update(l).eq("id",e).select();if(console.log("Update result:",{data:d,error:u,dataLength:null==d?void 0:d.length}),u)throw console.error("Supabase error:",u),Error("Database error: ".concat(u.message));if(!d||0===d.length)throw Error("Cannot update booking: This booking may not belong to your account, may not be in a status that allows updates, or may not exist. Please check booking status and try again.");return a(d[0])}},8525:(e,t,r)=>{r.d(t,{U:()=>i});var o=r(16010);function i(){return(0,o.createBrowserClient)("https://jxtgigcmplvjmtsxpfrp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4dGdpZ2NtcGx2am10c3hwZnJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMjE5OTksImV4cCI6MjA3NzY5Nzk5OX0.knIYsJJNWRo3UYvUlXgNmvWYZDQ1sacCWPBSMyFY_BM")}},25016:(e,t,r)=>{r.d(t,{cn:()=>a});var o=r(2821),i=r(75889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,o.$)(t))}},57878:(e,t,r)=>{let o;r.d(t,{N:()=>o,h:()=>s});var i=r(85553);let a="https://jxtgigcmplvjmtsxpfrp.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4dGdpZ2NtcGx2am10c3hwZnJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMjE5OTksImV4cCI6MjA3NzY5Nzk5OX0.knIYsJJNWRo3UYvUlXgNmvWYZDQ1sacCWPBSMyFY_BM";function s(){return!!a&&!!n||(console.error("[Supabase] Missing configuration. Please check your environment variables."),console.error("[Supabase] Required: NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY"),!1)}try{s()&&a&&n?(o=(0,i.UU)(a,n,{auth:{flowType:"pkce",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),console.log("[Supabase] Client initialized successfully")):console.error("[Supabase] Configuration validation failed. Please check your environment variables.")}catch(e){console.error("[Supabase] Initialization error:",e)}},97003:(e,t,r)=>{r.d(t,{$:()=>c,r:()=>s});var o=r(95155);r(12115);var i=r(17129),a=r(83101),n=r(25016);let s=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:a,asChild:c=!1,...l}=e,d=c?i.DX:"button";return(0,o.jsx)(d,{"data-slot":"button",className:(0,n.cn)(s({variant:r,size:a,className:t})),...l})}}}]);