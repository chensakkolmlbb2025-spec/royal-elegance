Cloudflare deployment guide for Royal Elegance

This project uses Next.js (pinned to 15.5.2) and OpenNext to produce a Cloudflare Pages-compatible build.

What I changed for Cloudflare
- Added `open-next` as a devDependency.
- Updated `package.json` scripts:
  - `build` -> `next build && npx open-next build`
  - `cf:build` -> `npx open-next build`

Required environment variables (set these in Cloudflare Pages > Settings > Environment variables)
- NEXT_PUBLIC_SUPABASE_URL
- NEXT_PUBLIC_SUPABASE_ANON_KEY
- SUPABASE_SERVICE_ROLE_KEY (only if server-side scripts need elevated access)
- NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
- STRIPE_SECRET_KEY (if server-side Stripe usage)
- NEXT_PUBLIC_APP_URL (your deployed site URL, e.g. https://royal-elegance.pages.dev)
- Any KHQR or third-party API keys used by server routes

Cloudflare Pages settings (recommended)
- Framework preset: "None" (we run CLI build)
- Build command: npm run cf:build
- Build output directory: leave default (OpenNext produces Pages-compatible output)
- Node version: 18.x or 20.x (match your local environment)

How to build locally (quick checks)
1. Install dependencies:
   npm install --legacy-peer-deps
2. Run Next build and OpenNext build (this may take several minutes):
   npm run build

How to run locally for development
- Use Next dev for local development:
  npm run dev

Deploying to Cloudflare Pages
1. Push your repo to GitHub (or connect your GitHub repo to Cloudflare Pages).
2. In Cloudflare Pages, create a new project and connect the repository.
3. Configure the environment variables listed above.
4. Set the build command to `npm run cf:build`.
5. Start the deployment â€” Cloudflare will run the build and deploy the site.

Notes and troubleshooting
- OpenNext v3+ is used here. If you see runtime errors after deployment, check Cloudflare Functions logs and ensure server-side environment variables are present.
- If you prefer the older @cloudflare/next-on-pages adapter, it was previously added but is deprecated; OpenNext is the recommended path.
- If your app depends on Next 16 features, consider testing thoroughly as we pinned Next to 15.5.2 for compatibility with OpenNext.

If you want, I can:
- Run a full `npm run build` here and fix any build-time errors.
- Revert the Next version to 16 and provide a migration plan using other Cloudflare approaches (e.g., build via Vercel or container-based deployment).

---
Generated by the local dev assistant to prepare Cloudflare deployment.
